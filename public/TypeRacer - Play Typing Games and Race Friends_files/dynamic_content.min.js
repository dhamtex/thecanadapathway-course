Date.now||(Date.now=function(){return(new Date).getTime()}),trackEvent("DynamicContent","Loaded",null,Date.now()-typeracerSessionStartTime);var typeracer_util=window.typeracer_util||{};typeracer_util.qsParam=function(e){var t=new RegExp("[?&]"+e+"=(.*?)(?:&|$)").exec(location.search);return t?t[1]:null};var trUniverse=typeracer_util.qsParam("universe"),_newAdPolicies=[{name:"adsABTest12_A",frames:[{E:["iframe/ab_test_a:336x280","teachers:50x50","iframe/ab_test_a2:300x250"],N:["iframe/ab_test_a:728x90"]},{W:["iframe/ab_test_a:160x600"],E:["iframe/ab_test_a2:336x280","teachers:50x50","iframe/ab_test_a3:300x250"]}],fixedFrameCount:0},{name:"adsABTest12_B",frames:[{E:["iframe/ab_test_b:336x280","teachers:50x50","iframe/ab_test_b2:300x250"],S:["iframe/ab_test_b:728x90"]},{W:["iframe/ab_test_b:160x600"],E:["iframe/ab_test_b2:336x280","teachers:50x50","iframe/ab_test_b3:300x250"]},{W:["iframe/ab_test_b:160x600"],E:["iframe/ab_test_b2:336x280","teachers:50x50","iframe/ab_test_b3:300x250"]}],fixedFrameCount:1},{name:"adsABTest12_C",frames:[{E:["iframe/ab_test_c:336x280","teachers:50x50","iframe/ab_test_c2:300x250"],S:["iframe/ab_test_c:728x90"]},{W:["iframe/ab_test_c:160x600"],E:["iframe/ab_test_c2:336x280","teachers:50x50","iframe/ab_test_c3:300x250"]},{E:["iframe/ab_test_c2:160x600"],W:["iframe/ab_test_c3:336x280","teachers:50x50","iframe/ab_test_c4:300x250"]}],fixedFrameCount:1},{name:"adsABTest13_A",frames:[{E:["iframe/sortable_1:300x250","teachers:50x50","iframe/sortable_2:300x250"],S:["iframe/sortable_1:728x90"]},{W:["iframe/sortable_1:160x600"],E:["iframe/sortable_1:300x250","teachers:50x50","iframe/sortable_2:300x250"]},{E:["iframe/sortable_1:160x600"],W:["iframe/sortable_1:300x250","teachers:50x50","iframe/sortable_2:300x250"]}],fixedFrameCount:1},{name:"adsABTest13_B",frames:[{E:["iframe/ab_test_c:336x280","teachers:50x50","iframe/ab_test_c2:300x250"],S:["iframe/ab_test_c:728x90"]},{W:["iframe/ab_test_c:160x600"],E:["iframe/ab_test_c2:336x280","teachers:50x50","iframe/ab_test_c3:300x250"]},{E:["iframe/ab_test_c2:160x600"],W:["iframe/ab_test_c3:336x280","teachers:50x50","iframe/ab_test_c4:300x250"]}],fixedFrameCount:1}],freestar=freestar||{},egApsInit=!1;function getAdNetwork(){return(window.adNetwork||"none").toUpperCase()}function getNewAdPolicy(e){for(var t=0;t<_newAdPolicies.length;t++){var a=_newAdPolicies[t];if(a.name===e)return a}switch(getAdNetwork()){case"YOLLA":return{name:"YOLLA",frames:[{E:["yolla_ad_rectangle:300x250","teachers:50x50","featured_universes:300x600","yolla_ad_skyscraper:300x600"],S:["yolla_ad_leaderboard:728x90"]}],fixedFrameCount:0};case"ENTHUSIAST":return{name:"ENTHUSIAST",frames:[{N:["enthusiast_ad_leaderboard_btf:728x90"],W:["enthusiast_ad_sidebar_west:160x600"],E:["enthusiast_ad_sidebar_east_1:300x250","teachers:50x50","featured_universes:300x600"],S:["enthusiast_ad_leaderboard_atf:728x90"]}],fixedFrameCount:0};case"FREESTAR":return{name:"FREESTAR",frames:[{N:["freestar_ad_leaderboard_btf:728x90"],W:["freestar_ad_sidebar_west:300x600"],E:["freestar_ad_sidebar_east_1:300x600","teachers:50x50","featured_universes:300x600"],S:["freestar_ad_leaderboard_atf:728x90"]}],fixedFrameCount:0};case"SUPERAWESOME":return{name:"SUPERAWESOME",frames:[{N:["superawesome_ad_leaderboard_btf:728x90"],W:["superawesome_ad_sidebar_west:300x600"],E:["superawesome_ad_sidebar_east_1:300x600","teachers:50x50","featured_universes:300x600"],S:["superawesome_ad_leaderboard_atf:728x90"]}],fixedFrameCount:0};default:return{name:"default",frames:[{E:["iframe/ab_test_c:336x280","teachers:50x50","featured_universes:300x600","iframe/ab_test_c2:300x250"],S:["iframe/ab_test_c:728x90"]},{W:["iframe/ab_test_c:160x600"],E:["iframe/ab_test_c2:336x280","teachers:50x50","featured_universes:300x600","iframe/ab_test_c3:300x250"]},{E:["iframe/ab_test_c2:160x600"],W:["iframe/ab_test_c3:336x280","teachers:50x50","featured_universes:300x600","iframe/ab_test_c4:300x250"]}],fixedFrameCount:1}}}function loadAdScripts(){"ENTHUSIAST"===adNetwork?loadAdScript("ENTHUSIAST"):"FREESTAR"===getAdNetwork()?(loadAdScript("FREESTAR"),freestar.queue.push((function(){completeAdSlots("FREESTAR")}))):"SUPERAWESOME"===getAdNetwork()&&(loadAdScript("SUPERAWESOME"),loadAdScript("FREESTAR"))}function loadAdScript(e){if("ENTHUSIAST"===e)completeAdSlots("ENTHUSIAST");else if("FREESTAR"===e)freestar.hitTime||(freestar.hitTime=Date.now(),freestar.queue=freestar.queue||[],freestar.config=freestar.config||{},freestar.debug=-1!==window.location.search.indexOf("fsdebug"),freestar.config.enabled_slots=[],window,a=document,r=a.getElementsByTagName("script")[0],n=a.createElement("script"),s="https://a.pub.network/typeracer-com",s+=freestar.debug?"/qa/pubfig.min.js":"/pubfig.min.js",n.async=!0,n.src=s,r.parentNode.insertBefore(n,r),freestar.initCallback=function(){console.log("::: FreeStar Ad Script Loaded :::"),0===freestar.config.enabled_slots.length?freestar.initCallbackCalled=!1:freestar.newAdSlots(freestar.config.enabled_slots)});else if("SUPERAWESOME"===e&&"undefined"==typeof AwesomeDisplay){var t=document.createElement("script");t.onload=function(){console.log("::: SA Ad Script Loaded :::"),completeAdSlots("SUPERAWESOME")},t.src="https://ads.superawesome.tv/v2/ads.js",document.head.appendChild(t)}var a,r,n,s}function completeAdSlots(e){if("ENTHUSIAST"===e)window.egAps&&"function"==typeof window.egAps.launchAds?egApsInit?(console.log("::: EG: reinstate :::"),egAps.reinstate()):(console.log("::: EG: launchAds :::"),egAps.launchAds(),egApsInit=!0):console.log("::: EG: egAps not available :::");else if("FREESTAR"===e){console.log("::: process available freestar ads slots"),console.log("::: freestar.newSidewall ::: "),console.log(freestar.newSidewall);for(var t=document.querySelectorAll("[data-fs-slot]"),a=0;a<t.length;a++){var r=t[a];r.dataset.fsProcessed||(freestar.newSidewall&&"function"==typeof freestar.newSidewall&&"sidewall"===r.dataset.fsType?(console.log("::: freestar > newSidewall :::"+r.dataset.fsSlot),freestar.newSidewall(r.dataset.fsSlot),r.setAttribute("data-fs-processed","true")):"sidewall"!==r.dataset.fsType&&(console.log("::: freestar > enabled_slots.push :::"+r.dataset.fsSlot),freestar.config.enabled_slots.push({placementName:r.dataset.fsSlot,slotId:r.dataset.fsSlot}),r.setAttribute("data-fs-processed","true")))}}else if("SUPERAWESOME"===e){var n=document.querySelectorAll("[data-sa-placement]");for(a=0;a<n.length;a++){var s=n[a];if(!s.dataset.fsProcessed){var i=new AwesomeDisplay(s.dataset.saPlacement);console.log("::: SA > placement :::"+s.dataset.saPlacement),s.appendChild(i.element),s.setAttribute("data-fs-processed","true")}}}}function genIframeUrl(e,t,a,r){return["//typeracer.com/dynamic_content/","typing_game","_",e,"_",t,"x",a,".html","?t=",r].join("")}function genIframeAdCode(e,t,a){var r=randInt();return['<iframe id="',e,"_iid_",r,"\" src='",genIframeUrl(e,t,a,r),"'",' name="',e,"_iname_",r,"\" marginwidth='0' marginheight='0'"," width='",t,"' height='",a,"' border='0' frameborder='0' style='border:none;' scrolling='no' tabIndex='-1'></iframe>"].join("")}function processAdScripts(){loadAdScripts()}function genInlineAdCode(e,t,a){return"yolla"===e?'<div class="ympb_target" data-type="'+["desktop",a<250?"leaderboard":"medrec","template"].join("-")+'" data-subtype="'+[t,a].join("x")+'"></div>':""}function _log(e){var t=window.console;t&&t.log(e)}function _logError(e){var t=window.console;t&&(t.error&&t.error(e),e.message?t.log("Error.message: "+e.message):e.description&&t.log("Error.description: "+e.description))}function _containsPII(e){return decodeURIComponent(e).indexOf("@")>=0}function _genAdDiv(e){if(_containsPII(window.location.search)||_containsPII(document.referrer))return makeDiv("");var t="adDiv"+Date.now()+"_"+randInt(32768);return makeDivWithAttrs({id:t},makeDivWithAttrs({style:"color:#AAA; font-size:75%;"},makeElement("span",null,"Advertisement:")+makeElement("span",{style:"margin-left:18px;"},'(<a href="javascript:;" onclick="$hide(\''+t+"');\">hide</a>)"))+makeDivWithAttrs({id:t+"_2"},e))}function renderBannerAd(){if(window.abTestName)switch(abTestName){case"adsABTest12_A":return renderNewAdUnit("iframe/ab_test_a",728,90);case"adsABTest12_B":return renderNewAdUnit("iframe/ab_test_b",728,90);case"adsABTest12_C":return renderNewAdUnit("iframe/ab_test_c",728,90)}return _genAdDiv(genIframeAdCode("as",728,90))+makeDivWithAttrs({style:"font-size:5%"},"&nbsp;")}function renderMainMenuAd(){return gwtWidgetBridge.newFlowPanel([getFacebookButtonWidget(),gwtWidgetBridge.newHTML("&nbsp;")])}function makeDiv(e){return makeElement("div",null,e)}function makeDivWithAttrs(e,t){return makeElement("div",e,t)}function makeElement(e,t,a){var r="<"+e;if(t)for(var n in t)r+=" "+n+'="'+t[n]+'"';return r+=">"+a+"</"+e+">"}function $show(e){var t=document.getElementById(e);t&&t.style&&(t.style.display="block")}function $hide(e){var t=document.getElementById(e);t&&t.style&&(t.style.display="none")}function randInt(e){return void 0===e&&(e=2147483647),~~Math.floor(Math.random()*e)}function displayNotice(e,t){var a=document.createElement("div");a.className="typeracerNotifications",a.innerHTML='<div class="notificationClose" onclick="hideSponsoredNotice(\''+t+"')\"></div>"+e,t&&(a.id=t);var r=document.getElementById("dUI");r.parentNode.insertBefore(a,r.parentNode.firstChild)}var sponsoredNotices={tr_keymasters:'<div ><a href="https://typingstats.com/event/keymasters-2023" onclick="trackSponsoredEvent(\'tr_keymasters\', \'click\');"><img class="dynamicImg" src="https://staging.typeracer.com/dynamic_content/TR-TypingstatsBanner.jpg"/></a></div>'};function trackSponsoredEvent(e,t){trackEvent("SponsoredNotice",e,t)}function hideSponsoredNotice(e){var t=document.getElementById(e);t&&(t.style.display="none"),setSponsoredNoticeCookie(e,5)}function renderSponsoredNotices(){if(!isPrivateUniverse())for(var e in sponsoredNotices){var t=parseInt(function(e){var t=`; ${document.cookie}`.split(`; ${e}=`);if(2===t.length)return t.pop().split(";").shift()}(e));if(!t||t<5){trackSponsoredEvent(e,"impression"),displayNotice(sponsoredNotices[e],e),setSponsoredNoticeCookie(e,t+1);break}}}function setSponsoredNoticeCookie(e,t){var a=new Date;a.setFullYear(a.getFullYear()+1),setCookieImpl(e,String(t),a.getTime(),null,"/")}function setCookieImpl(e,t,a,r,n,s){var i=e+"="+t;a&&(i+=";expires="+new Date(a).toGMTString()),r&&(i+=";domain="+r),n&&(i+=";path="+n),s&&(i+=";secure"),document.cookie=i}"lang_es"===trUniverse?addDynamicTrCssStyles(".textInfoContributor { display: none; }"):"worthless_impossible_stupid"===trUniverse&&displayNotice('<b>Contest Announcement</b><br>This is the homepage for a contest that began on May 1 and ended on June 1, 2014. The contest is now over, but you can keep racing on these texts just for fun. See this <a target="_blank" href="http://blog.typeracer.com/2014/04/28/win-prizes-in-typeracers-first-official-book-contest/">blog post</a> for the contest details.'),startsWith(trUniverse,"lang_")&&(sponsoredNotices.tr_notice_translators_wanted='How are you enjoying TypeRacer in your language? Want to help? Want to complain?<br>Let us know in the <span style="white-space: nowrap;font-style: italic;font-family: monospace;">#text-discussion</span> channel on <a target="_blank" href="https://discord.gg/typeracer" onclick="trackSponsoredEvent(\'tr_notice_translators_wanted\', \'click\');">TypeRacer Discord</a>.'),renderSponsoredNotices();var facebookLikeButtonWidget=null;function getFacebookButtonWidget(){return null==facebookLikeButtonWidget&&(facebookLikeButtonWidget=gwtWidgetBridge.newHTML('<iframe src="//www.facebook.com/plugins/like.php?href=http%3A%2F%2Fplay.typeracer.com&amp;layout=standard&amp;show_faces=false&amp;width=450&amp;action=like&amp;font=lucida+grande&amp;colorscheme=light&amp;height=35" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:450px; height:35px;" allowTransparency="true"></iframe>')),facebookLikeButtonWidget}var addThisWidget=null,addthis_config={data_track_clickback:!0};function getAddThisWidget(){if(null==addThisWidget){var e="addthisScriptElt";document.getElementById(e)||setTimeout((function(){addScript(e,"//s7.addthis.com/js/250/addthis_widget.js#username=typeracer&domready=1")}),10);var t=null,a=null,r=document.getElementsByTagName("meta");if(r)for(var n=0;n<r.length;n++){var s=r[n].getAttribute("property");s&&("og:title"==s?t=r[n].content:"og:description"==s&&(a=r[n].content))}t&&a&&(window.addthis_share={title:t,description:a});addThisWidget=gwtWidgetBridge.newHTML('<div class="addthis_toolbox addthis_default_style">\n    <a href="http://addthis.com/bookmark.php?v=250"       class="addthis_button_compact"       addthis:ui_click="true">Share TypeRacer:</a>\n    <span class="addthis_separator"> </span>\n    <a class="addthis_button_email"></a>\n    <a class="addthis_button_print" style="display: none;"></a>\n    <a class="addthis_button_preferred_1"></a>\n    <a class="addthis_button_preferred_2"></a>\n    <a class="addthis_button_preferred_3"></a>\n    <a class="addthis_button_preferred_4"></a>\n    <a class="addthis_button_preferred_5"></a>\n    <a class="addthis_button_preferred_6"></a>\n    <a class="addthis_button_preferred_7"></a>\n    <a class="addthis_button_preferred_8"></a>\n    <a class="addthis_button_preferred_9"></a>\n    <a class="addthis_button_google_plusone"></a>\n</div>')}return addThisWidget}var mainUserId=null;function getGwtModuleName(){if(window.gwtModuleName)return window.gwtModuleName;for(var e=document.scripts,t=/.*?\/(com\.typeracer\.[.\w]+)\.nocache\.js$/,a=0;a<e.length;a++){var r=e[a].src.match(t);if(r)return window.gwtModuleName=r[1],window.gwtModuleName}return""}function isPrivateUniverse(){return getGwtModuleName().indexOf("PrivateUniverse")>=0}function evCallback(e){e&&window.location.assign(e)}function getElementByTag(e){return document.getElementsByTagName(e)[0]}function getBodyElement(){return getElementByTag("body")}function appendChildToBody(e){return getBodyElement().appendChild(e),e}function removeChildFromBody(e){return getBodyElement().removeChild(e),e}function addScript(e,t){appendChildToBody(createDomElement("script",{id:e,type:"text/javascript",src:t}))}function removeScript(e){var t=document.getElementById(e);null!=t&&removeChildFromBody(t)}function createDomElement(e,t){var a=document.createElement(e);if(t)for(var r in t)t.hasOwnProperty(r)&&a.setAttribute(r,t[r]);return a}function startsWith(e,t){return e&&0===e.indexOf(t)}function endsWith(e,t){return e&&e.lastIndexOf(t)===e.length-t.length}function renderNewAdUnit(e,t,a){if(startsWith(e,"iframe/"))return _genAdDiv(genIframeAdCode(e.slice("iframe/".length),t,a));if(startsWith(e,"inline/"))return genInlineAdCode(e.slice("inline/".length),t,a);if("teachers"===e)return'<div style="margin: 25px 0; font-size: 1.2em;"><b>Teachers</b>: <a href="https://data.typeracer.com/admin/schools?af=gkzxc">Get TypeRacer for your school!</a></div>';if("sponsored"===e){var r='<div style="margin-bottom: 10px;"></div>';return r+=genIframeAdCode("bsazone1",300,125),r+='<div style="margin-top: 10px;"><a href="http://www.tkqlhce.com/click-3678708-10463747?URL=http://www.cafepress.com/typeracer"><img style="border: 1px gray solid" src="http://www.typeracer.com/dynamic_content/t-shirt.jpg"/></a><br/><div style="font-size: 12px"> <a href="http://www.tkqlhce.com/click-3678708-10463747?URL=http://www.cafepress.com/typeracer">Buy TypeRacer T-Shirts</a></div></div>'}return[e,t,a].join("<br>")}function getAdsRefreshInterval(){return 5e3}function getMaxAdBlockFailCount(){return 5}function addDynamicTrCssStyles(e){var t=getElementByTag("head"),a=document.createElement("style");a.type="text/css",a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e)),t.appendChild(a)}function mediaQueryIsMobile(){return testMediaQuery("only screen and (max-width: 560px), only screen and (max-device-width : 560px)")}function testMediaQuery(e){return window.matchMedia&&window.matchMedia(e).matches}!function(){switch(trUniverse){case"lang_sv":case"lang_tr":case"lang_da":case"lang_fi":case"lang_de":case"lang_ko":case"lang_ru":case"lang_ca":case"lang_zh":case"lang_zh-tw":case"lang_pl":case"lang_jp":case"lang_nl":case"lang_ar":case"lang_fr":case"lang_vi":case"lang_sr-latn":case"lang_es":case"lang_it":case"lang_pt":addDynamicTrCssStyles(".textInfoContributor { display: none; }")}}();
